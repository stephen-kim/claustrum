# 보안 및 MCP I/O

## MCP stdio 정책

MCP 서버/어댑터의 경우:
- `stdout`: JSON-RPC 프로토콜 메시지만
- `stderr`: 로그 및 오류만

배너, 시작 채팅 또는 마이그레이션 로그를 stdout으로 인쇄하지 마십시오.

## 원시 데이터 가드레일

- 원시 검색은 조각만 반환합니다.
- 단일 원시 메시지 보기는 스니펫 전용입니다.
- `max_chars` 제한이 적용됩니다.
- 기본적으로 엔드포인트는 전체 원시 세션 기록을 반환해서는 안 됩니다.

## 접근 제어

- API Key 인증이 필요합니다(`Authorization: Bearer <key>`).
- 원시 검색/보기:
  - 관리자 또는 프로젝트 구성원
  - 작업공간 전체 원시 검색에는 작업공간 관리자/소유자가 필요합니다.

## 감사 요구 사항

기록 및 검토:
- `raw.search`
- `raw.view`

감사 로그에는 행위자, 대상 및 타임스탬프가 포함되어야 합니다.

## 배포 보안 참고 사항

- 외부 DB 연결에는 TLS를 사용합니다(예: `sslmode=require`).
- API 키를 순환합니다.
- stderr에 비밀을 기록하지 마세요.